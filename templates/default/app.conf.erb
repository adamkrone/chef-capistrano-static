<VirtualHost *:<%= @params[:server_port] || node['apache']['listen_ports'].first %>>
<% if @params[:server_name] %>
  ServerName <%= @params[:server_name] %>
<% end %>
<% if @params[:server_aliases] %>
  ServerAlias <% @params[:server_aliases].each do |a| %><%= a %> <% end %>
<% end %>
  DocumentRoot <%= @params[:docroot] %>

  ErrorLog <%= node['apache']['log_dir'] %>/<%= @params[:name] %>-error.log
  CustomLog <%= node['apache']['log_dir'] %>/<%= @params[:name] %>-access.log combined
</VirtualHost>
